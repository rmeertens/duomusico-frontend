<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Nextemersion : Get a song/book/movie suggestion based on your duolingo level. ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Nextemersion</title>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script>
          
          var test;
      function myFunction(){
          document.getElementById("loading").style.display = "";  
          $.getJSON('http://80.60.177.158:8002/duolingorecommendation?username='+document.getElementById("id_of_textbox").value, function (results) {
                  console.log("Done with getting a response");
              console.log(results);
             // document.getElementById("demo").innerHTML = "go Listen to " + results.Best + " and ignore "  + results.Worst;
              test=results;
              for	(index = 0; index < results.length; index++) {
                    var nameAndArtist = results[index];
                    searchAlbums(nameAndArtist.NameSong+ " " + nameAndArtist.Artist,document.getElementById("spotify"+index));      
                }
              document.getElementById("loading").style.display = "none";
        
      });
      }
        var searchAlbums = function (query, element) {
    $.ajax({
        url: 'https://api.spotify.com/v1/search',
        data: {
            q: query,
            type: 'track'
        },
        success: function (response) {
            console.log(response);
            
           // resultsPlaceholder.innerHTML = template(response);
            element.innerHTML = "<iframe src=\"https://embed.spotify.com/?uri=spotify:track:"+response.tracks.items[0].id+"\" width=\"300\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\"></iframe>";
        }
    });
};
    </script>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">Duolingo e-mersion</h1>
          <h2 id="project_tagline">Using Artificial Intelligence to suggest the a song based based on your duolingo level. </h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a id="welcome-to-our-site" class="anchor" href="#welcome-to-our-site" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enter your username!</h3>

<p>This automatic page </p> <button onclick="myFunction()">Click me</button>
<input type="text" name="id_of_textbox" id="id_of_textbox"><br>
          
<p id="demo"></p>
          <div id="loading">
<img id="loading-image" src="images/loading.gif.gif" alt="Loading..." />
</div>  
        <p id="spotify1"></p>
          <p id="spotify2"></p>
          <p id="spotify3"></p>
          <p id="spotify4"></p>
          <p id="spotify5"></p>
          <p id="spotify6"></p>
          <p id="spotify7"></p>
          <p id="spotify8"></p>
          <p id="spotify9"></p>
          <p id="spotify10"></p>
      </section>
        
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Nextemersion maintained by <a href="https://github.com/Pinch-of-intelligence">Pinch-of-intelligence</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
    <script>
    document.getElementById("loading").style.display = "none";
    </script>
</html>
